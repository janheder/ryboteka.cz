Packeta=window.Packeta||{},Packeta.Viewport={element:null,originalValue:null,set:function(){Packeta.Viewport.element||(Packeta.Viewport.element=document.querySelector("meta[name=viewport]"),Packeta.Viewport.element?Packeta.Viewport.originalValue=Packeta.Viewport.element.getAttribute("content"):(Packeta.Viewport.originalValue="user-scalable=yes",Packeta.Viewport.element=document.createElement("meta"),Packeta.Viewport.element.setAttribute("name","viewport"),(document.head||document.getElementsByTagName("head")[0]).appendChild(Packeta.Viewport.element))),Packeta.Viewport.element.setAttribute("content","width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes")},restore:function(){null!==Packeta.Viewport.originalValue&&Packeta.Viewport.element.setAttribute("content",Packeta.Viewport.originalValue)}},Packeta.Util={makeRequest:function(e,t,i,a){try{var n=new XMLHttpRequest;n.open(e,t),n.timeout=5e3,n.onload=function(){200<=this.status&&this.status<300?a(n.response,!1):a({status:this.status,statusText:n.statusText},!0)},n.onerror=function(){a({status:this.status,statusText:n.statusText},!0)},n.ontimeout=function(){a({status:this.status,statusText:n.statusText},!0)},"POST"===e&&i?n.send(i):n.send()}catch(e){a({error:"XMLHttpRequest error: "+e},!0)}}},Packeta.Widget={baseUrl:"https://widget.packeta.com/",healthUrl:"https://widget.packeta.com/v6/api/hcs/api/healthcheck",versions:{v5:"v5",v6:"v6"},close:function(){},initIframe:function(e,t,a,n){Packeta.Widget.close(),"version"in(a=void 0===a?{}:a)||(a.version=3),a.apiKey=e;var o=Packeta.Widget.baseUrl+"v6/#/?";for(i in a.currentVersion===Packeta.Widget.versions.v5&&(o=Packeta.Widget.baseUrl+"v5/#/?"),a)o+="&"+i+"="+encodeURIComponent(a[i]);var s,r=null!=n;r?s=n:(Packeta.Viewport.set(),(s=document.createElement("div")).setAttribute("style","z-index: 999999; position: fixed; -webkit-backface-visibility: hidden; left: 0; top: 0; width: 100%; height: 100%; background: "+(a.overlayColor||"rgba(0, 0, 0, 0.3)")+"; "),s.addEventListener("click",function(){Packeta.Widget.close()}),setTimeout(function(){var e=c.getBoundingClientRect(),e="width"in e?e.width:e.right-e.left;Math.round(e)<window.innerWidth-10&&(c.style.width=window.innerWidth+"px",c.style.height=window.innerHeight+"px")},0)),s.addEventListener("keyup",function(e){27==e.keyCode&&Packeta.Widget.close()});var c=document.createElement("iframe");r?c.setAttribute("style","border: hidden; width: 100%; height: 100%; "):c.setAttribute("style","border: hidden; position: absolute; left: 0; top: 0; width: 100%; height: 100%; padding: 10px 5px; box-sizing: border-box; "),c.setAttribute("id","packeta-widget"),c.setAttribute("sandbox","allow-scripts allow-same-origin"),c.setAttribute("allow","geolocation"),c.setAttribute("src",o),s.appendChild(c),r||document.body.appendChild(s),null===s.getAttribute("tabindex")&&s.setAttribute("tabindex","-1"),s.focus();function l(e){try{var t=JSON.parse(e.data);if(!t.packetaWidgetMessage)return}catch(e){return}Packeta.Widget.close(t.packetaPoint)}window.addEventListener("message",l),Packeta.Widget.close=function(e){if(window.removeEventListener("message",l),r)try{c.parentNode.removeChild(c)}catch(e){}else document.body.removeChild(s),Packeta.Viewport.restore();t(e||null),Packeta.Widget.close=function(){}}},pick:function(i,a,n,o){function s(){n.currentVersion=Packeta.Widget.versions.v5,Packeta.Widget.initIframe(i,a,n,o)}void 0===n&&(n={}),Packeta.Util.makeRequest("GET",Packeta.Widget.healthUrl,null,function(e,t){t?(console.log("v6 widget health check result: "+JSON.stringify(e)),console.log("starting v5"),s()):(e="true"===e.toLocaleLowerCase(),console.log("v6 widget health check result: "+e),!0==e?(console.log("starting v6"),n.currentVersion=Packeta.Widget.versions.v6,Packeta.Widget.initIframe(i,a,n,o)):(console.log("starting v5"),s()))})}};
//# sourceMappingURL=maps/zasilkovna.js.map
